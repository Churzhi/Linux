# Linux
 Linuxå­¦ä¹ ç¬”è®°

## ä¸€ã€å®‰è£…Linux

å®˜ç½‘ä¸‹è½½é“¾æ¥ï¼š[http://isoredirect.centos.org/centos/7/isos/x86_64/](http://isoredirect.centos.org/centos/7.4.1708/isos/x86_64/)

é˜¿é‡Œäº‘ç«™ç‚¹ï¼šhttp://mirrors.aliyun.com/centos/7/isos/x86_64/

- `init 3` ç”±å›¾å½¢ç•Œé¢åˆ‡æ¢ä¸ºå‘½ä»¤è¡Œç•Œé¢

- `init 0` å…³æœº

- åœ¨å›¾å½¢ç•Œé¢ä½¿ç”¨ `ctrl+alt+F2`åˆ‡æ¢åˆ°dosç•Œé¢  

  dosç•Œé¢ `ctrl+alt+F2`åˆ‡æ¢å›å›¾å½¢ç•Œé¢

  åœ¨å‘½ä»¤ä¸Š è¾“å…¥ `init 3` å‘½ä»¤ åˆ‡æ¢åˆ°dosç•Œé¢ 

  è¾“å…¥` init 5`å‘½ä»¤ åˆ‡æ¢åˆ°å›¾å½¢ç•Œé¢
  
- CentOSä¸‹ä½¿ç”¨å‘½ä»¤è¡ŒWebæµè§ˆå™¨Links

  - ```bash
    yum install links
    ```

  - ```bash
    links www.baidu.com
    ```

    

## äºŒã€ç™»å½•

- `$`ä¸ºæ™®é€šç”¨æˆ·
- `#`ä¸ºè¶…çº§ç”¨æˆ·

## ä¸‰ã€ç»ˆç«¯çš„ä½¿ç”¨

#### **ç»ˆç«¯**

- å›¾å½¢ç»ˆç«¯
- å‘½ä»¤è¡Œç»ˆç«¯
- è¿œç¨‹ç»ˆç«¯ï¼ˆSSHã€VNCï¼‰

## å››ã€å¸¸è§ç›®å½•

```c
/æ ¹ç›®å½•
/root rootç”¨æˆ·çš„å®¶ç›®å½•
/home/username æ™®é€šç”¨æˆ·çš„å®¶ç›®å½•
/etc é…ç½®æ–‡ä»¶ç›®å½•
/bin å‘½ä»¤ç›®å½•
/sbin ç®¡ç†å‘½ä»¤ç›®å½•
/usr/bin/usr/sbinç³»ç»Ÿé¢„è£…çš„å…¶ä»–å‘½ä»¤
```

## äº”ã€ä¸‡èƒ½å¸®åŠ©å‘½ä»¤

#### 1ã€manå¸®åŠ©

- man æ˜¯manualçš„ç¼©å†™
- man å¸®åŠ©ç”¨æ³•ï¼š`man ls`  ã€`man -a "å‘½ä»¤"`
- man ä¹Ÿæ˜¯ä¸€æ¡å‘½ä»¤ï¼Œåˆ†ä¸º9ç« ï¼Œå¯ä»¥ä½¿ç”¨man å‘½ä»¤è·å¾— man çš„å¸®åŠ©
- - `man 7 man`

#### 2ã€helpå¸®åŠ©

- shellï¼ˆå‘½ä»¤è§£é‡Šå™¨ï¼‰è‡ªå¸¦çš„å‘½ä»¤ç§°ä¸ºå†…éƒ¨å‘½ä»¤ï¼Œå…¶ä»–çš„æ˜¯å¤–éƒ¨å‘½ä»¤
- - `type "å‘½ä»¤" `æŸ¥çœ‹ï¼ˆåŒºåˆ†ï¼‰å†…å¤–éƒ¨å‘½ä»¤
- å†…éƒ¨å‘½ä»¤ä½¿ç”¨ help å¸®åŠ©
- - `help cd`
- å¤–éƒ¨å‘½ä»¤ä½¿ç”¨ help å¸®åŠ©
- - `ls --help`

#### 3ã€infoå¸®åŠ©(è‹±æ–‡)

- infoå¸®åŠ©æ¯”helpæ›´è¯¦ç»†ï¼Œä½œä¸ºhelpçš„è¡¥å……
- - `info ls`

## å…­ã€æ–‡ä»¶ç®¡ç†

### ==**ä¸€åˆ‡çš†æ–‡ä»¶**==

#### 1ã€æ–‡ä»¶æŸ¥çœ‹

- `pwd`æ˜¾ç¤ºå½“å‰çš„ç›®å½•åç§°
- `cd`  æ›´æ”¹å½“å‰çš„æ“ä½œç›®å½•
- - `cd /path/to/...ç»å¯¹è·¯å¾„`
  - `cd ./path/to/...ç›¸å¯¹è·¯å¾„`
  - `cd ../path/to/...`ç›¸å¯¹è·¯å¾„
- `ls`æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹çš„æ–‡ä»¶
  - `ls` [é€‰é¡¹ï¼Œé€‰é¡¹... ] å‚æ•° ...
  - å¸¸ç”¨å‚æ•°ï¼š
  - `-l` é•¿æ ¼å¼æ˜¾ç¤ºæ–‡ä»¶
  - `-a` æ˜¾ç¤ºéšè—æ–‡ä»¶
  - `-r` é€†åºæ˜¾ç¤º
  - `-t` æŒ‰ç…§æ—¶é—´é¡ºåºæ˜¾ç¤º
  - `-R` é€’å½’æ˜¾ç¤º

###### 

#### 2ã€ç›®å½•æ–‡ä»¶çš„åˆ›å»ºä¸åˆ é™¤

- `mkdir`å»ºç«‹ç›®å½•
  - `-p` å»ºç«‹å¤šçº§ç›®å½• `mkdir -p /a/a/b/c/d/e`
- `rmdir`åˆ é™¤ç©ºç›®å½•

- `rm -r ` åˆ é™¤éç©ºç›®å½•
- `rm -rf ` åˆ é™¤éç©ºç›®å½•å¹¶ä¸”ä¸æç¤ºåˆ é™¤ä¿¡æ¯

#### 3ã€é€šé…ç¬¦

- å®šä¹‰:shell â½¤ç”¨é€”:æ“ä½œå¤šä¸ªç›¸ä¼¼(æœ‰ç®€å•è§„å¾‹ï§˜)çš„â½‚æ–‡ä»¶ å¸¸â½¤ç”¨é€šé…ç¬¦

`*` åŒ¹é…ä»»ä½•å­—ç¬¦ä¸²

`? `åŒ¹é…1ä¸ªå­—ç¬¦ä¸²
 `[xyz]` åŒ¹é…xyzä»»æ„â¼€ä¸€ä¸ªå­—ç¬¦

` [a-z]` åŒ¹é…â¼€ä¸€ä¸ªèŒƒå›´
` [!xyz]` æˆ– `[xyz]`ä¸ï¥§åŒ¹é…

`*`åŒ¹é…å½“å‰ç›®å½•æ‰€æœ‰æ–‡ä»¶å¤¹å’Œæ–‡ä»¶

```shell
[root@localhost copy]# cp -v file* /mnt/hgfs//copy/a
"filea" -> "/mnt/hgfs//copy/a/filea"
"fileb" -> "/mnt/hgfs//copy/a/fileb"
"filec" -> "/mnt/hgfs//copy/a/filec"
[root@localhost copy]# 
```



#### 4ã€æ–‡ä»¶æ“ä½œ

##### å¤åˆ¶å’Œç§»åŠ¨ç›®å½•

###### å¤åˆ¶ç›®å½•ï¼š

```shell
cp -r /home/chuzhi/a /mnt/hgfs/copy/
# æŠŠ/home/chuzhiçš„aæ–‡ä»¶ï¼Œå¤åˆ¶åˆ°/mnt/hgfs/copy/
```

###### æ˜¾ç¤ºå¤åˆ¶å†…å®¹ï¼š

```shell
cp -v /home/chuzhi/a /mnt/hgfs/copy/
```

```shell

```

###### ç§»åŠ¨æ–‡ä»¶

mv [é€‰é¡¹] æºæ–‡ä»¶ ç›®æ ‡â½‚æ–‡ä»¶ 

mv [é€‰é¡¹] æºæ–‡ä»¶ ç›®å½•

#### 6ã€æ–‡æœ¬å†…å®¹æŸ¥çœ‹

- `cat` æ–‡æœ¬å†…å®¹æ˜¾ç¤ºåˆ°ç»ˆç«¯

- `head`æŸ¥çœ‹æ–‡ä»¶å¼€å¤´

- `tail`æŸ¥çœ‹æ–‡ä»¶ç»“å°¾
  - å¸¸ç”¨å‚æ•°`-f`æ–‡ä»¶å†…å®¹æ›´æ–°åï¼Œæ˜¾ç¤ºä¿¡æ¯åŒæ­¥æ›´æ–°

- `wc` ç»Ÿè®¡â½‚æ–‡ä»¶å†…å®¹ä¿¡æ¯

#### 7ã€æ‰“åŒ…&å‹ç¼©ï¼ˆå¸¸ç”¨å¤‡ä»½ğŸ”§ï¼‰

##### 7.1 æ‰“åŒ…å‘½ä»¤

â€‹		æœ€æ—©çš„ Linux å¤‡ä»½ä»‹è´¨æ˜¯ç£å¸¦ï¼Œä½¿â½¤ç”¨çš„å‘½ä»¤æ˜¯` tar` å¯ä»¥æ‰“åŒ…åçš„ç£å¸¦â½‚æ–‡ä»¶è¿›â¾è¡Œï¨ˆå‹ç¼©å‚¨å­˜ï¼Œå‹ç¼©çš„å‘½ä»¤æ˜¯ `gzip` å’Œ `bzip2` ç»å¸¸ä½¿â½¤ç”¨çš„æ‰©å±•åæ˜¯` .tar.gz .tar.bz2 .tgz`

- `tar` æ‰“åŒ…å‘½ä»¤ å¸¸â½¤ç”¨å‚æ•°

- å¸¸ç”¨å‚æ•°
  - `c` æ‰“åŒ…
  - `x` è§£åŒ…
  - `f` æŒ‡å®šæ“ä½œç±»å‹ä¸ºæ–‡ä»¶

##### 7.2 å‹ç¼©å’Œè§£å‹ç¼©

- å¯ä»¥ä½¿â½¤ç”¨ `gzip` å’Œ `bzip2` å‘½ä»¤å•ç‹¬æ“ä½œ 
- é€šå¸¸å’Œ `tar` å‘½ä»¤é…åˆæ“ä½œ
- å¸¸â½¤ç”¨å‚æ•°
  - `-z gzip` æ ¼å¼å‹ç¼©å’Œè§£å‹ç¼©
  - `-j bzip2` æ ¼å¼å‹ç¼©å’Œè§£å‹ç¼©
  - `zxf` `jxf`è§£å‹ç¼©å‘½ä»¤

```shell
tar cf /home/chuzhi/study/etc_back_up.tar /etc
#   æ‰“åŒ…   æ‰“åŒ…å­˜æ”¾çš„ç›®å½•                       ç›®æ ‡æ–‡ä»¶

tar czf /home/chuzhi/study/etc_backup.tar.gz /etc
#   æ‰“åŒ…å‹ç¼©

tar xf /home/chuzhi/study/etc_back_up.tar -C /home/chuzhi/a
#   è§£åŒ…


```



## ä¸ƒã€Vimç¼–è¾‘å™¨



#### vimçš„åŸºæœ¬é…ç½®

  ç¼–è¾‘VIMé…ç½®æ–‡ä»¶

```bash
vim /etc/vimrc
```

```bash
#åœ¨æœ€åæ·»åŠ ä»¥ä¸‹å†…å®¹

set nu          // è®¾ç½®æ˜¾ç¤ºè¡Œå·
set showmode    // è®¾ç½®åœ¨å‘½ä»¤è¡Œç•Œé¢æœ€ä¸‹é¢æ˜¾ç¤ºå½“å‰æ¨¡å¼ç­‰
set ruler       // åœ¨å³ä¸‹è§’æ˜¾ç¤ºå…‰æ ‡æ‰€åœ¨çš„è¡Œæ•°ç­‰ä¿¡æ¯
set autoindent  // è®¾ç½®æ¯æ¬¡å•å‡»Enteré”®åï¼Œå…‰æ ‡ç§»åŠ¨åˆ°ä¸‹ä¸€è¡Œæ—¶ä¸ä¸Šä¸€è¡Œçš„èµ·å§‹å­—ç¬¦å¯¹é½
syntax on       // å³è®¾ç½®è¯­æ³•æ£€æµ‹ï¼Œå½“ç¼–è¾‘Cæˆ–è€…Shellè„šæœ¬æ—¶ï¼Œå…³é”®å­—ä¼šç”¨ç‰¹æ®Šé¢œè‰²æ˜¾ç¤º
```



### 1ã€vimçš„å››ç§æ¨¡å¼

#### 1.1å››ç§æ¨¡å¼:

iæ’å…¥æ¨¡å¼
vå¯è§†æ¨¡å¼
næ­£å¸¸æ¨¡å¼
cå‘½ä»¤æ¨¡å¼

#### 1.2æ’å…¥æ¨¡å¼ `i a o I A O`

`i`è¿›å…¥æ’å…¥æ¨¡å¼
`I`è¿›å»æ’å…¥æ¨¡å¼å¹¶ä¸”å…‰æ ‡åˆ°å½“å‰è¡Œå¼€å¤´
`a`è¿›å»æ’å…¥æ¨¡å¼å¹¶ä¸”å…‰æ ‡åˆ°å½“å‰å…‰æ ‡çš„ä¸‹ä¸€ä½
`A`è¿›å»æ’å…¥æ¨¡å¼å¹¶ä¸”å…‰æ ‡åˆ°å½“å‰è¡Œçš„æœ«å°¾
`o`è¿›å»æ’å…¥æ¨¡å¼å¹¶ä¸”å…‰æ ‡åˆ°å½“å‰å…‰æ ‡çš„ä¸‹ä¸€è¡Œäº§ç”Ÿç©ºè¡Œ
`O`è¿›å…¥æ’å…¥æ¨¡å¼å¹¶ä¸”å…‰æ ‡åˆ°å½“å‰è¡Œçš„ä¸Šä¸€è¡Œäº§ç”Ÿç©ºè¡Œ

#### 1.3`:`è¡¨ç¤ºæœ«è¡Œæ¨¡å¼

### **2.æ­£å¸¸æ¨¡å¼ä¸‹ï¼Œå››ä¸ªæ–¹å‘hjkl**

h å·¦
l å³
j ä¸‹
k ä¸Š

æ­£å¸¸æ¨¡å¼ä¸‹ï¼Œå¤åˆ¶ï¼Œç²˜è´´

`yy` å¤åˆ¶å•è¡Œ `p` ç²˜è´´å•è¡Œ `3p` ç²˜è´´3è¡Œ
`3yy` å¤åˆ¶3è¡Œï¼ˆå½“å‰è¡Œå¾€ä¸‹ä¸‰è¡Œï¼ŒåŒ…æ‹¬å½“å‰è¡Œï¼‰

å•è¡Œæ— æç¤ºï¼Œå¤šè¡Œæœ‰æç¤º

`y$` å¤åˆ¶å½“å‰å…‰æ ‡ä½ç½®åˆ°è¿™ä¸€è¡Œçš„ç»“å°¾å­—ç¬¦
`dd` å‰ªåˆ‡ä¸€æ•´è¡Œ

`d$(D)` å‰ªåˆ‡å½“å‰ä½ç½®åˆ°è¿™ä¸€è¡Œçš„ç»“å°¾
`u` æ™®é€šæ¨¡å¼ä¸‹ï¼Œæ’¤é”€ ï¼Œå¤šæ¬¡uå¤šæ¬¡æ’¤é”€
`u` `ctrl +r` é‡åšï¼Œè¿”å›ä¸Šä¸€æ¬¡æ’¤é”€ï¼Œç›¸å½“äºwinçš„ctrl+y
`x` åˆ é™¤æŒ‡å®šå­—ç¬¦ï¼Œå…‰æ ‡é€‰ä¸­ï¼ŒæŒ‰`x`
`r+æ–°å­—ç¬¦` å­—ç¬¦æ›¿æ¢ï¼Œå…‰æ ‡é€‰ä¸­æŒ‰`r`åœ¨è¾“å…¥æ–°å­—ç¬¦



`G` ç§»åŠ¨åˆ°æŒ‡å®šè¡Œ
`:set nu` æŸ¥çœ‹å½“å‰è¡Œ
`11G` ç§»åŠ¨åˆ°ç¬¬11è¡Œ
`g` ç§»åŠ¨åˆ°ç¬¬ä¸€è¡Œ
`G`ç§»åŠ¨åˆ°æœ€åä¸€è¡Œ
`^` è¡¨ç¤ºåˆ°è¿™ä¸€è¡Œå­—ç¬¦çš„å¼€å¤´
`$` è¡¨ç¤ºåˆ°è¿™ä¸€è¡Œçš„ç»“å°¾ï¼ˆç”¨äºä¸€è¡Œå¤ªé•¿çš„æƒ…æ™¯ï¼‰

### 3.å‘½ä»¤æ¨¡å¼

`w + æ–‡ä»¶å`ä¿å­˜åˆ°æŒ‡å®šæ–‡ä»¶åä¸­ï¼Œä¸æ¥æ–‡ä»¶åè¡¨ç¤ºä¿å­˜åˆ°åŸå§‹æ–‡ä»¶å½“ä¸­

`:q`é€€å‡º

`:qï¼`å¼ºåˆ¶é€€å‡º

`:wq!` å¼ºåˆ¶å†™å…¥é€€å‡º

`:! + åŠŸèƒ½å‘½ä»¤ å¦‚ï¼šipconfig`è¡¨ç¤ºä¸´æ—¶æŸ¥çœ‹å‘½ä»¤

`/ + å­—ç¬¦`è¡¨ç¤ºæŸ¥æ‰¾æŸä¸ªå­—ç¬¦  `n`å‘ä¸‹ç§»åŠ¨æŸ¥æ‰¾ `shift n `å‘ä¸Šç§»åŠ¨æŸ¥æ‰¾



`:s/old/new`æ›¿æ¢å­—ç¬¦ï¼Œé»˜è®¤è¡¨ç¤ºæ‰€åœ¨è¡ŒèŒƒå›´è¿›è¡Œæ›¿æ¢

`:s/old/new/g`æ•´ä¸ªæ–‡ä»¶èŒƒå›´æ›¿æ¢ï¼ˆ g è¡¨ç¤ºå…¨å±€ï¼‰

`:èµ·å§‹è¡Œï¼Œç»“æŸè¡Œs/old/new/g `(å¤šæ¬¡æ›¿æ¢åŠ `/g`ï¼Œå•æ¬¡åˆ™ä¸éœ€è¦)

`ä¾‹ï¼š:3,4s/l/L`å³æ›¿æ¢3-4è¡Œçš„ l å˜ä¸º L 

`:set nuï¼ˆå‘½ä»¤ï¼‰ `è¡¨ç¤ºå•æ¬¡ä¿®æ”¹è®¾ç½®ç”Ÿæ•ˆï¼Œå¦‚ `nu` `nonu`

è®¾ç½®æ°¸ä¹…ç”Ÿæ•ˆéœ€è®¾ç½®é…ç½®æ–‡ä»¶`/etc /vimrc`ä¸­æœ€åä¸€è¡Œæ·»åŠ `set nu`

### 3.å¯è§†æ¨¡å¼

- è¿›å…¥æ–¹å¼

  - `v` å­—ç¬¦å¯è§†æ¨¡å¼

  - `V` è¡Œå¯è§†æ¨¡å¼

  - `ctrl + v` å—å¯è§†æ¨¡å¼

    - é…åˆ `d ` å’Œ`I(æ’å…¥)`ï¼ˆå¤§å†™ i ï¼‰å‘½ä»¤å¯ä»¥è¿›è¡Œå—çš„ä¾¿æ·æ“ä½œ è¿ç»­æŒ‰ä¸¤æ¬¡`esc`

    

## å…«ã€ç”¨æˆ·ç®¡ç†

- `useradd` æ–°å»ºç”¨æˆ·  ï¼ˆ`root`ç”¨æˆ·æ¨¡å¼ä¸‹ï¼‰
- `userdel` åˆ é™¤ç”¨æˆ·
- `passwd` ä¿®æ”¹ç”¨æˆ·å¯†ç 
- `usermod` ä¿®æ”¹ç”¨æˆ·å±æ€§
- `chage` ä¿®æ”¹ç”¨æˆ·å±æ€§
- `/root` ä¸º`root` ç”¨æˆ·çš„å®¶ç›®å½•
- `/home/ç”¨æˆ·å` ä¸ºæ™®é€šç”¨æˆ·çš„å®¶ç›®å½•



### 1ã€åˆ›å»ºç”¨æˆ·`useradd` ï¼ˆ`root`ç”¨æˆ·æ¨¡å¼ä¸‹ï¼‰

![](https://tva1.sinaimg.cn/large/00831rSTgy1gcbbce5ynsj311e06gmy2.jpg)



### 2ã€ ä¿®æ”¹ç”¨æˆ·å¯†ç `passwd`

- `passwd + ç”¨æˆ·å` ä¿®æ”¹ç”¨æˆ·å¯†ç 
- `passwd` ä¿®æ”¹`root`ç”¨æˆ·å¯†ç 



### 3ã€åˆ é™¤ç”¨æˆ·`userdel` 

- `userdel -r ç”¨æˆ·å` åˆ é™¤ç”¨æˆ·â•ç”¨æˆ·ç›®å½•



### 4ã€ç»„ç®¡ç†å‘½ä»¤

- `groupadd` æ–°å»ºç”¨æˆ·ç»„
- `groupdel` åˆ é™¤ç”¨æˆ·ç»„
- `useradd -g group1 user1` 
  - æ–°å»ºç”¨æˆ· user1 å¹¶æ·»åŠ åˆ° group1 ä¸­



### 5ã€ç”¨æˆ·å’Œç”¨æˆ·ç»„çš„é…ç½®æ–‡ä»¶

```shell
#è¶…çº§ç”¨æˆ·æ¨¡å¼ä¸‹
vim /ect/passwd

 root:x:0:0:root:/root:/bin/bash
 chuzhi:x:1000:1000:chuzhi:/home/chuzhi:/bin/bash
 wilson:x:1001:1001::/home/wilson:/bin/bash
```

```shell
#å­˜å‚¨ç”¨æˆ·åŠ å¯†çš„å¯†ç æ–‡ä»¶
vim /etc/shadow
```

```shell
#ç”¨æˆ·ç»„
vim /etc/group
```



### 6ã€æŸ¥çœ‹æ–‡ä»¶æƒé™

<img src="https://tva1.sinaimg.cn/large/00831rSTgy1gcbbyhxt9uj313o0ae75h.jpg" alt="æŸ¥çœ‹æ–‡ä»¶æƒé™" style="zoom:80%;" />

```shell
# æ–‡ä»¶ç±»å‹
- æ™®é€šâ½‚æ–‡ä»¶
d â½¬ç›®å½•â½‚æ–‡ä»¶
b å—ç‰¹æ®Šâ½‚æ–‡ä»¶
c å­—ç¬¦ç‰¹æ®Šâ½‚æ–‡ä»¶ 
l ç¬¦å·é“¾æ¥
f å‘½åç®¡é“
s å¥—æ¥å­—â½‚æ–‡ä»¶
```

#### æ–‡ä»¶æƒé™è¡¨ç¤ºæ–¹æ³•

- å­—ç¬¦æƒé™è¡¨ç¤ºæ³•
  - r  è¯»
  - w å†™
  - x  æ‰§è¡Œ
- æ•°å­—æƒé™è¡¨ç¤ºæ³•
  - r = 4
  - w = 2
  - x = 1 



- -==rw-==<u>r-x</u>r-- 1 ==userame== <u>groupname</u> mtime filename
  - ==rw-== â½‚æ–‡ä»¶å±ä¸»çš„æƒé™
  - <u>r-x</u> â½‚æ–‡ä»¶å±ç»„çš„æƒé™
  - r-- å…¶ä»–â½¤ç”¨æˆ·çš„æƒé™

åˆ›å»ºæ–°â½‚æ–‡ä»¶æœ‰é»˜è®¤æƒé™ï¼Œæ ¹æ® umask å€¼è®¡ç®—ï¼Œå±ä¸»å’Œå±ç»„æ ¹æ®å½“å‰è¿›ç¨‹çš„â½¤ç”¨æˆ·æ¥è®¾å®š



#### ç›®å½•æƒé™è¡¨ç¤ºæ–¹æ³•

- x    è¿›å…¥ç›®å½•
- rx  æ˜¾ç¤ºç›®å½•å†…çš„æ–‡ä»¶å
- wx ä¿®æ”¹ç›®å½•å†…çš„æ–‡ä»¶å



### 7ã€æƒé™ç®¡ç†



#### ä¿®æ”¹æƒé™

- chmod ä¿®æ”¹â½‚æ–‡ä»¶ã€â½¬ç›®å½•æƒé™
  - chmod u+x /tmp/testfile
  - chmod 755 /tmp/testfile
- chown
- chgrp

```bash
[root@localhost test]# ls -l /usr/bin/passwd 
-rwsr-xr-x. 1 root root 27856 Aug  9  2019 /usr/bin/passwd
[root@localhost test]# ls -l /etc/shadow
----------. 1 root root 1321 Mar  1 13:12 /etc/shadow
```



#### ç‰¹æ®Šæƒé™

- SUID â½¤ç”¨äºâ¼†äºŒè¿›åˆ¶å¯æ‰§â¾è¡Œï¨ˆâ½‚æ–‡ä»¶ï¼Œæ‰§â¾è¡Œï¨ˆå‘½ä»¤æ—¶å–å¾—â½‚æ–‡ä»¶å±ä¸»æƒé™
  - å¦‚ /usr/bin/passwd
- SGID â½¤ç”¨äºâ½¬ç›®å½•ï¼Œåœ¨è¯¥â½¬ç›®å½•ä¸‹åˆ›å»ºæ–°çš„â½‚æ–‡ä»¶å’Œâ½¬ç›®å½•ï¼Œæƒé™â¾ƒè‡ªåŠ¨æ›´ï¤æ”¹ä¸ºè¯¥â½¬ç›®å½•çš„å±ç»„ï¼ˆ==ä¸€èˆ¬ç”¨äºæ–‡ä»¶å…±äº«==ï¼‰
- SBIT â½¤ç”¨äºâ½¬ç›®å½•ï¼Œè¯¥â½¬ç›®å½•ä¸‹æ–°å»ºçš„â½‚æ–‡ä»¶å’Œâ½¬ç›®å½•ï¼Œä»… root å’Œâ¾ƒè‡ªâ¼°å·±å¯ä»¥åˆ é™¤
  - å¦‚ /tmp

ä¾‹å­ï¼š

```bash
[root@localhost test]# ls -l /usr/bin/passwd 
-rwsr-xr-x. 1 root root 27856 Aug  9  2019 /usr/bin/passwd
[root@localhost test]# chmod 4755 bfile 
[root@localhost test]# ls -l
-rwsr-xr-x. 1 chuzhi chuzhi 0 Mar  1 13:05 bfile

drwxrwxrwt. 20 root root 4096 Mar  1 13:25 /tmp
[root@localhost test]# chmod 1777 test
[root@localhost test]# ls -l
drwsrwxrwt. 2 root   root   6 Mar  1 12:01 test

```





```bash
[chuzhi@localhost test]$ ls -l
total 0
-rw-r--r--. 1 root root 0 Mar  1 12:01 afile
drwxr-xr-x. 2 root root 6 Mar  1 12:01 test
[root@localhost test]# chmod 400 afile 
[root@localhost test]# ls -l
total 0
-r--------. 1 root root 0 Mar  1 12:01 afile
drwxr-xr-x. 2 root root 6 Mar  1 12:01 test
[root@localhost test]# echo 123
123
[root@localhost test]# echo 123 > afile 
[root@localhost test]# cat afile 
123

```



```bash
[chuzhi@localhost test]$ touch bfile
[chuzhi@localhost test]$ ls -l
æ€»ç”¨é‡ 4
-r--------. 1 root   root   4 3æœˆ   1 12:05 afile
-rw-rw-r--. 1 chuzhi chuzhi 0 3æœˆ   1 13:05 bfile
drwxr-xr-x. 2 root   root   6 3æœˆ   1 12:01 test
[chuzhi@localhost test]$ chmod 020 bfile 
[chuzhi@localhost test]$ ls -l
æ€»ç”¨é‡ 4
-r--------. 1 root   root   4 3æœˆ   1 12:05 afile
-----w----. 1 chuzhi chuzhi 0 3æœˆ   1 13:05 bfile
drwxr-xr-x. 2 root   root   6 3æœˆ   1 12:01 test
[chuzhi@localhost test]$ id chuzhi
uid=1000(chuzhi) gid=1000(chuzhi) ç»„=1000(chuzhi)
[chuzhi@localhost test]$ echo 123 > bfile 
-bash: bfile: æƒé™ä¸å¤Ÿ
[chuzhi@localhost test]$ 

```



## ä¹ã€ç½‘ç»œç®¡ç†



### 1ã€ç½‘ç»œçŠ¶æ€æŸ¥çœ‹

#### å·¥å…·åŒ…

##### net-tools  & iproute

```bash
#1.net-tools
ifconfig
route
netstat

#2.iproute2 (centos7ä¸»æ¨å‘½ä»¤)
ip
ss

```



##### ifconfig

- eth0ç¬¬ä¸€å—ç½‘å¡ï¼ˆç½‘ç»œæ¥å£ï¼‰
- ç¬¬ä¸€ä¸ªç½‘ç»œæ¥å£å¯èƒ½å«ä¸‹é¢çš„åå­—
  - eno1 æ¿è½½ç½‘å¡
  - ens33PCI-Eç½‘å¡
  - en0s3æ— æ³•è·å–ç‰©ç†ä¿¡æ¯çš„PCI-Eç½‘å¡
  - centos 7 ä½¿ç”¨äº†ä¸€è‡´æ€§ç½‘ç»œè®¾å¤‡å‘½åï¼Œä»¥ä¸Šéƒ½ä¸åŒ¹é…åˆ™ä½¿ç”¨eth0



#### ç½‘ç»œæ¥å£å‘½åä¿®æ”¹

- ç½‘å¡å‘½åè§„åˆ™å— biosdevname å’Œ netã€‚ifnamesä¸¤ä¸ªå‚æ•°å½±å“
- ç¼–è¾‘ /etc/default/grub æ–‡ä»¶ã€‚å¢åŠ  biosdevname = 0 net.ifnames = 0
- æ›´æ–°grub
  - å‘½ä»¤#ï¼šgrub2-mkconfig -o /boot/grub2/grub.cfg
- é‡å¯
  - reboot

|       | biosdevname | net.names | ç½‘å¡å |
| ----- | ----------- | --------- | ------ |
| é»˜è®¤  | 0           | 1         | ens33  |
| ç»„åˆ1 | 1           | 0         | em1    |
| ç»„åˆ2 | 0           | 0         | eth0   |



#### æŸ¥çœ‹ç½‘ç»œæƒ…å†µ

- æŸ¥çœ‹ç½‘å¡ç‰©ç†é“¾æ¥æƒ…å†µ

  ```bash
  mii-tool eth0
  ```



#### æŸ¥çœ‹ç½‘å…³

- æŸ¥çœ‹ç½‘å…³

  ```bash
  route -n
  ```

- ä½¿ç”¨ -n å‚æ•°ä¸è§£æä¸»æœºå



### 2ã€ç½‘ç»œé…ç½®

#### å¸¸ç”¨å‘½ä»¤

```bash
ifconfig<æ¥å£> <IPåœ°å€> [netmask å­ç½‘æ©ç ]

#å¯åŠ¨
ifup <æ¥å£>
#å…³é—­
ifdown <æ¥å£>
```



#### æ·»åŠ ç½‘å…³

```bash
route add defaut gw <ç½‘å…³>

route add -host <æŒ‡å®šIP> gw <ç½‘å…³>

route add -net <æŒ‡å®šç½‘æ®µ> netmask <å­ç½‘æ©ç > gw <ç½‘å…³IP>
```



- æ·»åŠ ç½‘å…³(10.211.55.2)éœ€è¦å…ˆåˆ é™¤åŸæ¥çš„ç½‘å…³ï¼ˆ10.211.55.1ï¼‰

  ```bash
  route del default gw 10.211.55.
  #æŸ¥çœ‹ç½‘å…³
  route -n
  route add default gw 10.211.55.2
  ```

- æ·»åŠ æ˜ç»†è·¯ç”±

  ```bash
  #è®¾å®šä¸ºå¦‚æœè®¿é—®çš„ä¸»æœºä¸º10.0.0.1æ—¶ï¼ŒæŠŠæ•°æ®åŒ…å‘ç»™10.211.55.1
  route add -host 10.0.0.1 gw 10.211.55.1
  ```

- æŒ‡å®šè®¿é—®ç½‘æ®µ

  ```bash
  #è®¿é—®192.168.0.1æ—¶ï¼Œé€šè¿‡10.211.55.3å‡ºå»è®¿é—®
  route add -net 192.168.0.1 netmask 255.255.255.0 gw 10.211.55.3
  ```

  



#### ç½‘ç»œå‘½ä»¤åˆé›†ï¼šipå‘½ä»¤

- ip addr ls

  ```bash
  ifconfig
  ```

-  ip link set dev eth0 up

  ```bash
  #å¯åŠ¨eth0ç½‘å¡
  ifup eth0
  ```

- ip adds add 10.0.0.1/24 dev eth1

  ```bash
  #ä¿®æ”¹ipå¹¶åŒæ—¶ä¿®æ”¹å­ç½‘æ©ç 
  ifconfig eth1 10.0.0.1 netmask 255.255.255.0
  ```

- ip route add 10.0.0/24 via 192.168.0.1

  ```bash
  route add -net 10.0.0.0 netmask 255.255.255.0 gw 192.168.0.1
  ```

ä¾‹å­ï¼š

```bash
#ä¿®æ”¹æœ¬å­£ipåœ°å€10.211.55.3ä¸º10.211.55.4
ifconfig eth0 10.211.55.4
```

> æ³¨æ„ï¼šå¦‚æœæ˜¯ä½¿ç”¨äº‘ä¸»æœºï¼Œè¯¥æ¡å‘½ä»¤ä¼šç«‹å³ç”Ÿæ•ˆã€‚



### 3ã€è·¯ç”±å‘½ä»¤



### 4ã€ç½‘ç»œæ•…éšœæ’é™¤

#### å¸¸ç”¨æ•…éšœæ’é™¤å‘½ä»¤ï¼š

```bash
#
ping
#è¿½è¸ªè·¯ç”±
traceroute
#æ£€æŸ¥æ˜¯å¦æœ‰æ•°æ®åŒ…ä¸¢å¤±
mtr

nslookup
#æ£€æŸ¥ç«¯å£è¿æ¥çŠ¶æ€
telnet
#åˆ†ææ•°æ®åŒ…
tcpdump

netstat

ss
```

- è¿½è¸ªç›®æ ‡ipæ˜¯å¦æœ‰æ•°æ®åŒ…ä¸¢å¤±

  ```bash
  #1è¡¨ç¤ºé•¿æ—¶é—´è¿½è¸ª
  traceroute -w 1 www.baidu.com
  ```

- æ›´è¯¦ç»†çš„è¿½è¸ªä¿¡æ¯

  ```bash
  mtr
  ```

- æŸ¥çœ‹åŸŸåè§£æåœ°å€

  ```bash
  nslookup www.baidu.com
  
  Server:
  Address:
  ```

- å½“ç½‘ç»œå¯ä»¥pingé€šè¿˜æ˜¯æ— æœåŠ¡æ—¶ï¼ŒæŸ¥çœ‹ç«¯å£

  ```bash
  #linuxå…ˆå®‰è£…telnet
  yum install telnet -y
  
  #æ£€æŸ¥å½“å‰ä¸»æœºåˆ°ç›®æ ‡ä¸»æœºçš„80ç«¯å£æ˜¯å¦ç•…é€š
  telnet www.baidu.com 80
  
  ```

- æŠ“åŒ…æŸ¥çœ‹

  ```bash
  #-i any æŠ“å–æ‰€æœ‰ç½‘å¡çš„æ•°æ®åŒ… -nè§£æä¸ºåŸŸå prot ä¸º80
  tcpdump -i any -n port 80
  #æ•è·ä¸»æœº ç›®æ ‡ä¸»æœºä¸º10.0.0.1
  tcpdump -i any -n host 10.0.0.1
  #æ•è·ä¸»æœº ç›®æ ‡ä¸»æœºä¸º10.0.0.1 ç«¯å£ä¸º80
  tcpdump -i any -n host 10.0.0.1 and prot 80
  
  #ä¿å­˜æ•è·ä¿¡æ¯
  cpdump -i any -n host 10.0.0.1 and prot 80 -w/tmp/filename
  ```

- æ•°æ®åŒ…æ²¡æœ‰é—®é¢˜æ—¶ï¼Œå¯èƒ½æ˜¯æœåŠ¡çš„ç›‘å¬åœ°å€çš„é—®é¢˜

  ```bash
  #-n(æ˜¾ç¤ºipåœ°å€ï¼Œä¸æ˜¾ç¤ºåŸŸå) t(ä»¥tcpæ–¹å¼æˆªå–æ‰€éœ€å†…å®¹) p(ç«¯å£å¯¹åº”çš„è¿›ç¨‹) l(tcpæœåŠ¡çŠ¶æ€ listen)
  netstat -ntpl
  
  ```

- ss

  ```bash
  #ä¸netstatç›¸åŒï¼Œæ˜¾ç¤ºæ–¹å¼ä¸åŒ
  ss -ntpl
  ```

  



### 5ã€ç½‘ç»œæœåŠ¡ç®¡ç†

#### ç½‘ç»œæœåŠ¡ç®¡ç†åˆ†ä¸ºä¸¤ç§ï¼š

##### SysV & systemdï¼š

```bash
service network start|stop|restart

chkconfig -list network

systemclt list-unit-files NetworkManager.service

systemclt start|stop|restart NetworkManger

systemclt enable|disable NetworkManger

```

- è¿˜åŸé…ç½®

  ```bash
  service network restart
  ```

- æŸ¥çœ‹å½“å‰é…ç½®

  ```bash
  service network status
  ```

- æŸ¥çœ‹ç½‘ç»œæœåŠ¡

  ```bash
  systemclt list-unit-files NetworkManager.service
  ```

- ç¦ç”¨ä¸¤å¥—å‘½ä»¤çš„å…¶ä¸­ä¸€ä¸ªï¼Œåªä½¿ç”¨NetManager

  ```bash
  #å½“æˆ‘ä»¬æƒ³è¦ä½¿ç”¨NetManageræ—¶
  #å…ˆæŸ¥çœ‹network
  chkconfig --list network
  
  #å¦‚æœçœ‹åˆ°2345æ˜¯å¼€å¯çš„,åˆ™å…³é—­2345
  chkconfig --level 2345 network off
  
  ```

- æœåŠ¡å™¨ä¸€èˆ¬ä½¿ç”¨systemctl

  ```bash
  #ç¦ç”¨NetManager
  systemctl disable NetworkManager
  #å¯ç”¨
  systemctl enable NetworkManager
  ```

  



### 6ã€å¸¸ç”¨ç½‘ç»œé…ç½®æ–‡ä»¶

- 

#### ç½‘ç»œé…ç½®æ–‡ä»¶ï¼š

- Ifcfg-eth0  (ç½‘å¡)
- /etc/hosts

##### ç½‘å¡é…ç½®æ–‡ä»¶ï¼š

```bash
cd /etc/sysconfig/network-scripts
#æ˜¾ç¤ºç½‘ç»œæ¥å£çš„é…ç½®æ–‡ä»¶
ls ifcfg-*

vim ifcfg-eth0
#ONBOOT="yes"è¡¨ç¤ºå¼€æœºæ—¶ç½‘å¡è¢«å¯ç”¨
#é…ç½®å®Œæˆä¹‹åä½¿ä¹‹ç”Ÿæ•ˆ
service network restart
systemctl restart NetworkManager.service
```



#### æŸ¥çœ‹ä¸»æœºå

```bash
hostname
```

#### ä¿®æ”¹ä¸»æœºå

```bash
hostname c7.test11

#ä½¿ä¸»æœºåæ°¸ä¹…ç”Ÿæ•ˆ
hostnamectl set-hostname c7.test11
#åœ¨æœåŠ¡å™¨ä¸­ä¾èµ–ä¸»æœºåå·¥ä½œï¼Œä¿®æ”¹ä¸»æœºåä¹Ÿè¦ä¿®æ”¹ç›¸åº”é…ç½®æ–‡ä»¶
vim /etc/hosts
#æŠŠæ–°è®¾ç½®çš„ä¸»æœºåå†™åœ¨127.0.0.1åé¢ï¼Œå³æ·»åŠ ä¸‹é¢ä¸€è¡Œ
127.0.0.1 c7.test11

```

